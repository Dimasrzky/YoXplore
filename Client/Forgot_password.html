<html>
<head>
    <title>Forgot Password</title>
    <link rel="icon" href="/Image/Logo Yoxplore.png" type="image/png">
    <link rel="stylesheet" href="/Style/Forgot_password.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
    <div class="container"> 
      <div class="background-section">
        <img src="/Image/Yoxplore logo text.png">
    </div>

    <div class="login-section">
      <h2>Forgot Password</h2>
      <form method="POST" action="/YoXplore/Controller/Auth.php">
        <input type="hidden" name="action" value="forgot">
          <div class="input-group">
              <input type="text" id="username" name="username" placeholder=" " required>
              <label for="username">Username</label>
          </div>
          <div class="input-group">
              <input type="password" id="password" name="password" placeholder=" " required>
              <label for="password">New Password</label>
          </div>
          <div class="input-group">
            <input type="password" id="com_password" name="com_password" placeholder=" " required>
            <label for="com_password">Confirm Password</label>
        </div>
      </form>    
      <button type="submit">Change Password</button>
      <a href="/Client/Login.html" class="create-account">Back to login page</a>        
  </div>
    </div>
</body>
<script>
    document.querySelector("form").addEventListener("submit", function(event) {
        event.preventDefault();
        
        const formData = new FormData();
        formData.append('username', document.getElementById("username").value.trim());
        formData.append('password', document.getElementById("password").value);
        
        fetch("/YoXplore/Controller/Auth.php?action=forgot", {
            method: "POST",
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            alert(data.message);
            if(data.success) {
                window.location.href = "/YoXplore/Client/Login.html";
            }
        })
        .catch(error => {
            alert("Terjadi kesalahan");
            console.error(error);
        });
    });
</script>
</html>

    