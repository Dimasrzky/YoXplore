<html>
    <head>
        <title>Yotaste - Explore Yogyakarta</title>
        <link rel="icon" href="../Image/Logo Yoxplore.png" type="image/png">
        <link rel="stylesheet" href="../Style/Yotaste.css">
    </head>
    <body>
        <header>
            <nav class="container">
                <a href="/Client/Home.html"><img class="logo" src="../Image/Yoxplore logo text.png" alt="Yoxplore Logo"></a>
                <div class="nav-links">
                    <a href="../Client/Home.html"><img src="../Image/home.png" alt="Home Icon"> Home</a>
                    <a href="../Client/YoTrip.html"><img src="../Image/yotrip.png" alt="Trip Icon"> YoTrip</a>
                    <a href="../Client/YoConcert.html"><img src="../Image/yoconcert.png" alt="Concert Icon"> YoConcert</a>
                    <a href="../Client/YoTaste.html" class="active"><img src="../Image/yotaste.png" alt="Taste Icon"> YoTaste</a>
                    <a href="../Client/YoStay.html"><img src="../Image/yostay.png" alt="Stay Icon"> YoStay</a>
                </div>
                <div class="user-profile">
                    <span id="usernameDisplay"></span></div>
                <div class="profile-dropdown">
                    <div class="profile-icon" onclick="toggleDropdown()">
                        <img src="../Image/user.png" alt="Profile Icon">
                    </div>
                    <div id="dropdown-menu" class="dropdown-menu">
                        <a href="../Client/Profile.html" class="menu-item">
                            <img src="../Image/navbar/settings.png" alt="Settings Icon">
                            Account 
                        </a>
                        <a href="../Client/Login.html" onclick="logout()" class="menu-item logout">
                            <img src="../Image/navbar/logout.png" alt="Logout Icon">
                            Logout
                        </a>
                    </div>
                </div>  
            </nav>
        </header>

        <div class="container">
            <section class="hero">
                <div class="text">
                    <h2>Are you hungry?</h2>
                    <p>Find the best foods and deliciouce in Yogyakarta.</p>
                </div>
                <div class="search-bar">
                    <input type="text" placeholder="where you want to go?" />
                    <a href="#"><img src="../Image/search.png">Search</a>
                </div>
            </section>
        </div>

        <div class="container3">
            <section class="most-popular">
                <div class="header-section">
                    <h2>Our Recommendation</h2>
                    <div class="shorted-by">
                        <label for="sort-options">Shorted by:</label>
                        <select id="sort-options">
                            <option value="popular">Popularity</option>
                            <option value="traditiionalFood">Traditional</option>
                            <option value="modernFood">Modern</option>
                        </select>
                    </div>
                </div>
                <div class="popular-grid">
                    <div class="popular-item">
                        <div class="image-container">
                            <a href="../Client/Item.html">
                                <img src="https://tourezia.com/wp-content/uploads/2023/07/Snapinsta.app_347181399_210111078483887_4847221134072566665_n_1080-2.jpg.webp" alt="Candi Prambanan">
                            <div class="rating">
                                <span></span>
                            </div>
                            </a>
                        </div>
                        <div class="content">
                            <h3>Candi Prambanan</h3>
                            <div class="location">
                                <img src="../Image/location_brown.png"  alt="Location Icon">
                                <span>Sleman, Yogyakarta</span>
                            </div>
                        </div>
                    </div>

                    <div class="popular-item">
                        <div class="image-container">
                            <a href="../Client/Item.html">
                                <img src="https://tourezia.com/wp-content/uploads/2023/07/Snapinsta.app_347181399_210111078483887_4847221134072566665_n_1080-2.jpg.webp" alt="Candi Prambanan">
                            <div class="rating">
                                <span></span>
                            </div>
                            </a>
                        </div>
                        <div class="content">
                            <h3>Candi Prambanan</h3>
                            <div class="location">
                                <img src="../Image/location_brown.png"  alt="Location Icon">
                                <span>Sleman, Yogyakarta</span>
                            </div>
                        </div>
                    </div>

                    <div class="popular-item">
                        <div class="image-container">
                            <a href="../Client/Item.html">
                                <img src="https://tourezia.com/wp-content/uploads/2023/07/Snapinsta.app_347181399_210111078483887_4847221134072566665_n_1080-2.jpg.webp" alt="Candi Prambanan">
                            <div class="rating">
                                <span></span>
                            </div>
                            </a>
                        </div>
                        <div class="content">
                            <h3>Candi Prambanan</h3>
                            <div class="location">
                                <img src="../Image/location_brown.png"  alt="Location Icon">
                                <span>Sleman, Yogyakarta</span>
                            </div>
                        </div>
                    </div>

                    <div class="popular-item">
                        <div class="image-container">
                            <a href="../Client/Item.html">
                                <img src="https://tourezia.com/wp-content/uploads/2023/07/Snapinsta.app_347181399_210111078483887_4847221134072566665_n_1080-2.jpg.webp" alt="Candi Prambanan">
                            <div class="rating">
                                <span></span>
                            </div>
                            </a>
                        </div>
                        <div class="content">
                            <h3>Candi Prambanan</h3>
                            <div class="location">
                                <img src="../Image/location_brown.png"  alt="Location Icon">
                                <span>Sleman, Yogyakarta</span>
                            </div>
                        </div>
                    </div>

                    <div class="popular-item">
                        <div class="image-container">
                            <a href="../Client/Item.html">
                                <img src="https://tourezia.com/wp-content/uploads/2023/07/Snapinsta.app_347181399_210111078483887_4847221134072566665_n_1080-2.jpg.webp" alt="Candi Prambanan">
                            <div class="rating">
                                <span></span>
                            </div>
                            </a>
                        </div>
                        <div class="content">
                            <h3>Candi Prambanan</h3>
                            <div class="location">
                                <img src="../Image/location_brown.png"  alt="Location Icon">
                                <span>Sleman, Yogyakarta</span>
                            </div>
                        </div>
                    </div>
    
                        </div>
                    </div>
                </div>
            </section>
        </div> 

        <footer class="footer">
            <div class="contact-info">
                <h3>Contact us</h3>
                <ul>
                    <li><img src="../Image/footer/clock.png" alt="Clock" class="icon"> Monday - Friday, 09:00 - 17:00</li>
                    <li><img src="../Image/footer/email.png" alt="Email" class="icon"> Email: <a href="mailto:yoxplore@gmail.com">yoxplore@gmail.com</a></li>
                    <li><img src="../Image/footer/phone-call.png" alt="Phone" class="icon"> Phone: 08123456789</li>
                    <li><img src="../Image/yotrip.png" alt="Location" class="icon"> Universitas Islam Indonesia,</li>
                    <div class="alamat">
                        Gedung K.H. Mas Mansyur, <br>
                        Daerah Istimewa Yogyakarta 55584
                    </div>
                </ul>
            </div>
            
            <div class="products">
                <h3>Products</h3>
                <ul>
                    <li><a href="/Client/Yotrip.html">YoTrip</a></li>
                    <li><a href="/Client/Yotaste.html">YoTaste</a></li>
                    <li><a href="/Client/Yoconcert.html">YoConcert</a></li>
                    <li><a href="/Client/Yostay.html">YoStay</a></li>
                </ul>
            </div>
            <div class="social-media">
                <h3>Follow us on</h3>
                <ul>
                    <li class="icon"><img src="../Image/footer/sosmed/instagram.png" alt="Instagram">Instagram</li>
                    <li class="icon"><img src="../Image/footer/sosmed/tik-tok.png" alt="TikTok">TikTok</li>
                    <li class="icon"><img src="../Image/footer/sosmed/twitter.png" alt="Twitter">X</li>
                    <li class="icon"><img src="../Image/footer/sosmed/youtube.png" alt="YouTube">YouTube</li>
                    <li class="icon"><img src="../Image/footer/sosmed/facebook.png" alt="Facebook">Facebook</li>
                    <li class="icon"><img src="../Image/footer/sosmed/telegram.png" alt="Telegram">Telegram</li>
                </ul>
            </div>
            <div class="copyright">
                Copyright &copy; 2024 Yoxplore. All rights reserved
            </div>
        </footer>   
    </body>
    <script>

        function logout() {
            // Clear semua data
            sessionStorage.clear();
            localStorage.clear();
            window.location.href = '../Client/Login.html';
        }

        document.addEventListener('DOMContentLoaded', function() {
            const usernameDisplay = document.getElementById('usernameDisplay');
            fetch('/YoXplore/Controller/get_user_data.php')
                .then(response => response.json())
                .then(data => {
                    if(data.username) {
                        usernameDisplay.textContent = data.username;

                        if (data.profileImage) {
                            const navbarProfileIcon = document.querySelector('.profile-icon img');
                            if (navbarProfileIcon) {
                                navbarProfileIcon.src = data.profileImage;
                                navbarProfileIcon.style.borderRadius = '50%';
                                navbarProfileIcon.style.width = '40px';
                                navbarProfileIcon.style.height = '40px';
                                navbarProfileIcon.style.objectFit = 'cover';
                            }
                        }
                    }
                });
        });
        
            // Load profile image berdasarkan user_id
            const userId = sessionStorage.getItem('user_id');
            const profileImage = localStorage.getItem(`profileImage_${userId}`);
            
            if (profileImage) {
                const navbarProfileIcon = document.querySelector('.profile-icon img');
                if (navbarProfileIcon) {
                    navbarProfileIcon.src = profileImage;
                    navbarProfileIcon.style.borderRadius = '50%';
                    navbarProfileIcon.style.width = '40px';
                    navbarProfileIcon.style.height = '40px';
                    navbarProfileIcon.style.objectFit = 'cover';
                }
            }
        
        // Fungsi toggle dropdown tetap sama
        function toggleDropdown() {
            const dropdown = document.getElementById('dropdown-menu');
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        }
        
        // Menutup dropdown jika klik di luar area
        window.onclick = function (event) {
            if (!event.target.closest('.profile-dropdown')) {
                const dropdown = document.getElementById('dropdown-menu');
                if (dropdown) {
                    dropdown.style.display = 'none';
                }
            }
        };

        document.addEventListener('DOMContentLoaded', function() {
            loadDestinations();
        });
        
        function loadDestinations() {
            const featureType = 'YoTrip'; // sesuaikan dengan halaman
            
            fetch(`../Controller/get_destinations.php?feature=${featureType}`)
                .then(response => response.json())
                .then(data => {
                    if(data.success) {
                        const container = document.querySelector('.popular-grid');
                        container.innerHTML = '';
                        
                        data.destinations.forEach(dest => {
                            container.innerHTML += `
                                <div class="popular-item">
                                    <div class="image-container">
                                        <a href="Item.html?id=${dest.id}">
                                            <img src="${dest.main_image}" alt="${dest.name}">
                                            <div class="rating">
                                                <span>★ ${dest.avg_rating || '0'}</span>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="content">
                                        <h3>${dest.name}</h3>
                                        <div class="location">
                                            <img src="../Image/location_brown.png" alt="Location Icon">
                                            <span>${dest.address}</span>
                                        </div>
                                    </div>
                                </div>
                            `;
                        });
                    }
                });
        }
    </script>
</html>